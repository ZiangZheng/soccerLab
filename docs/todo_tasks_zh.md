## 📝 SoccerLab 架构开发任务清单

这份清单将重点放在您提到的核心模块：**单一技能（Train Tasks）**、**控制核心（FSM）** 和 **多智能体（Battle Task）**。

### I. 基础架构与配置任务 (Foundation)

| 编号 | 模块 | 任务描述 | 状态 | 路径参考 |
| :--- | :--- | :--- | :--- | :--- |
| **F-1** | 机器人资产 | 最终确定并优化机器人（如四足或人形）的 USD 资产，确保碰撞体和惯性参数的准确性。 | 待办 | `soccerLab/data/assets/assetslib` |
| **F-2** | 机器人库 | 完善基础的 `RobotCfg` 类，定义所有关节、传感器和基础 PD 控制器参数。 | 进行中 | `soccerLab/source/robotlib` |
| **F-3** | 机器人库 | 针对不同技能（如追球、射门）定义定制化的 `ObservationCfg` 和 `ActionCfg`。 | 待办 | `soccerLab/source/robotlib` |

---

### II. 单一技能训练任务 (Train Tasks)

这些任务旨在作为 FSM 中的独立“状态”进行训练和测试。

| 编号 | 任务名称 | 目标/描述 | 状态 | 路径参考 |
| :--- | :--- | :--- | :--- | :--- |
| **T-1** | **基础 Locomotion** | 实现稳定的 RL 任务，训练机器人在各种地形下，对目标速度和方向的跟踪能力。 | 进行中 | `.../train/locomotion` |
| **T-2** | **跟球追球** | 实现一个 RL 任务，训练机器人快速且准确地靠近足球，并到达预定的站位。 | 进行中 | `.../train/balls` |
| **T-3** | **射门** | 实现一个 RL 任务，训练机器人使用特定动作（如踢腿）以目标速度和方向将球踢向球门。 | 进行中 | `.../train/shooting` |
| **T-4** | **自稳/恢复** | 增加一个任务，训练机器人在被干扰或摔倒后，能够迅速恢复站立状态。 | 待办 | `.../train/recovery` (新增) |

---

### III. 控制核心任务 (FSM Integration)

这是将独立技能组合成高层策略的关键。

| 编号 | 任务名称 | 目标/描述 | 状态 | 路径参考 |
| :--- | :--- | :--- | :--- | :--- |
| **C-1** | **FSM 骨架** | 定义 `FSMController` 基类，实现状态（`State`）和切换（`Transition`）机制。 | 进行中 | `soccerLab/source/fsmLab` |
| **C-2** | **并行 FSM** | 实现并行状态机结构，用于同时管理运动步态和高层目标。 | 进行中 | `soccerLab/source/fsmLab` |
| **C-3** | **核心技能封装** | 将训练好的 T-1, T-2, T-3 策略加载并封装为 FSM 的可执行状态。 | 待办 | `soccerLab/source/fsmLab` |
| **C-4** | **高层切换逻辑** | 定义从 **`Idle`** $\to$ **`Chasing`** $\to$ **`Shooting`** 的完整切换条件（基于球距离、角度等）。 | 待办 | `soccerLab/source/fsmLab` |

---

### IV. 多智能体竞技任务 (Battle Task)

这是实现团队策略和对抗的核心。

| 编号 | 任务名称 | 目标/描述 | 状态 | 路径参考 |
| :--- | :--- | :--- | :--- | :--- |
| **B-1** | **场景设置** | 创建一个包含两个团队（蓝/红）和球门的标准足球场场景。 | 进行中 | `.../battle/team_vs_team` |
| **B-2** | **多智能体配置** | 使用 IsaacLab 的 API 正确配置多智能体环境，确保每个机器人有独立的观测和动作空间。 | 进行中 | `.../battle/team_vs_team` |
| **B-3** | **竞技奖励函数** | 定义团队级别（如进球奖励、失球惩罚）和个体级别（如控球、传球）的奖励机制。 | 待办 | `.../battle/team_vs_team` |
| **B-4** | **FSM 集成测试** | 在 Battle Task 中，测试 FSM 驱动的两个机器人团队是否能执行基础的攻防策略。 | 待办 | `.../battle/team_vs_team` |

---

### V. 工具与部署任务 (Utilities & Deployment)

| 编号 | 任务名称 | 目标/描述 | 状态 | 路径参考 |
| :--- | :--- | :--- | :--- | :--- |
| **U-1** | **训练脚本** | 确保 `train.py` 能够加载所有 `Train Tasks` 并开始 RL 训练。 | 待办 | `.../factoryIsaac/train.py` |
| **U-2** | **Play 脚本** | 确保 `play.py` 能够加载 FSM 策略或任意 Checkpoint 进行可视化测试。 | 待办 | `.../factoryIsaac/play.py` |
| **U-3** | **文档** | 更新 README 和架构文档，确保与最新代码进度一致。 | 待办 | README.md |
